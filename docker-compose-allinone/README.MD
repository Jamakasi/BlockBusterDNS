# Самодостаточная сборка
## Включает в себя:
- wireguard в роли туннеля, ждет подключения клиентов на порту 51666 из вне и внутри
- wiregurad-ui в роли WUI, ждет подключения на внешнем порту 5000 и внутреннем 80 (http) со стандартными admin:admin. При подключение из под wg отзывается на http://wg.local . Внутри есть nat для ipv6
- tayga в роли nat64, внутри есть nat для ipv4
- coredns в роли Block Buster DNS выполняющим ключевую роль, слушает на 53 (tcp+udp dns) порту dns запросы, также слушает 80 порт для управления фильтром. При подключение из под wg отзывается на http://dns.local


## Параметры
Почти всё описано в compose. Что не описано то в конфигах и файлах сборки контейнеров.
Обратить внимание на WGUI_USERNAME и WGUI_PASSWORD где задается дефолтный логин и пароль для wg-ui
Также обязательно указать внешний в параметре WGUI_ENDPOINT_ADDRESS свой внешний IP_VPS +порт 51666
Остальные параметры менять строго по желанию.

## Запуск
Все проделывать на VPS\VDS
- клонировать репозиторий.
- запустить по docker-compose up -d
- первый раз зайти на IP_VPS:5000 и создать первый конфиг для wg.
- далее закрыть все внешние порты на сервере кроме 51666
- Теперь при подключении из под wg можно перейти на http://wg.local и создать дополнительных клиентовю
- Далее перейти на http://dns.local и добавить нужные домены которые необходимо обойти. К примеру *.googlevideo.com. чтобы видео на ютубе не тупило и yt3.ggpht.com. чтобы починить аватарки на ютубе. Причем первое с wildcard включает все поддомены, второе только один домен

## Внимание
- Первая версия compose, нужно почти все тестировать и переписать на чистую без лишнего.
- Необходимо строго помнить о кэше. Т.е. если попытаться зайти на заблокированный ресурс, после добавить его в фильтр, то вероятнее всего кэш обновится только через 3600с.